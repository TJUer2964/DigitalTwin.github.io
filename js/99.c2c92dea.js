"use strict";(self["webpackChunkdigitaltwin"]=self["webpackChunkdigitaltwin"]||[]).push([[99],{7099:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("div",{staticClass:"content",attrs:{id:"box2l1"}},[t._m(0),e("EchartsL1")],1),e("div",{staticClass:"content",attrs:{id:"box2l2"}},[t._m(1),e("EchartsL2")],1),e("div",{staticClass:"content",attrs:{id:"box2r1"}},[e("div",{staticStyle:{"text-align":"left"}},[e("i",{staticClass:"el-icon-news titletext"}),e("p",{staticClass:"titletext"},[t._v("设置空压站开关时间")]),e("el-tooltip",{staticClass:"item",attrs:{content:"时间段1应在0-12之间，时间段2应在12-24之间",placement:"top"}},[e("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"20px"}})])],1),e("ElementR1",{attrs:{R1Data:t.pR1Data},on:{R1DataChanged:t.updateR1ParentData}})],1),e("div",{staticClass:"content",attrs:{id:"box2r2"}},[t._m(2),e("ElementR2",{attrs:{R2Data:t.pR2Data},on:{R2DataChanged:t.updateR2ParentData,click:t.updateBestData}}),e("div",{staticClass:"threeButton"},[e("el-button",{staticStyle:{width:"30%"},attrs:{type:"primary"},on:{click:t.getdata}},[t._v("一键应用优化效果")]),e("el-button",{staticStyle:{width:"30%"},attrs:{type:"primary"},on:{click:t.updatedata}},[t._v("应用")]),e("el-button",{staticStyle:{width:"30%"},attrs:{type:"primary"},on:{click:t.resetdata}},[t._v("重置")])],1)],1)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"left"}},[e("i",{staticClass:"el-icon-news titletext"}),e("p",{staticClass:"titletext"},[t._v("优化后开关站时间")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"left"}},[e("i",{staticClass:"el-icon-news titletext"}),e("p",{staticClass:"titletext"},[t._v("优化前后耗电量")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"left"}},[e("i",{staticClass:"el-icon-news titletext"}),e("p",{staticClass:"titletext"},[t._v("设置补气压力")])])}],r=a(1558);function s(){return(0,r.U)("/runstrategy/getDatas").then((t=>{if(200===t.code)return t.data;throw new Error(t.msg||"Unknown error")}))}function n(t){return(0,r.v)("/runstrategy/upgradeData",t).then((t=>{if(200===t.code)return t.data;throw new Error(t.msg||"Unknown error")}))}var l=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%",height:"80%"},attrs:{id:"2l1"}})},c=[];a(7658);function m(){return(0,r.U)("/onandoff/getDatas").then((t=>{if(200===t.code)return t.data;throw new Error(t.msg||"Unknown error")}))}function d(){return(0,r.U)("/onandoff/getnewDatas").then((t=>{if(200===t.code)return t.data;throw new Error(t.msg||"Unknown error")}))}var h={mounted(){this.draw(),this.getData2L1()},methods:{draw(){var t=this.$echarts.init(document.getElementById("2l1"));window.addEventListener("resize",(function(){t.resize()}));var e={tooltip:{trigger:"axis"},legend:{top:"5%",data:["空压站1","空压站2","空压站3"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLabel:{formatter:"{value} h"},data:function(){let t=[];for(let e=0;e<=1440;e++)t.push(Math.round(e/60));return t}()},yAxis:{type:"value"},series:[{itemStyle:{normal:{color:{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:"#FFFFFF"},{offset:1,color:"#5b82e8"}]}}},name:"空压站1",type:"line",step:"start",data:[1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0],areaStyle:{}},{itemStyle:{normal:{color:{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:"#FFFFFF"},{offset:1,color:"#829adb"}]}}},name:"空压站2",type:"line",step:"start",data:[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0],areaStyle:{}},{itemStyle:{normal:{color:{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:"#FFFFFF"},{offset:1,color:"#195bfa"}]}}},name:"空压站3",type:"line",step:"start",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,0],areaStyle:{}}]};t.setOption(e)},getData2L1(){m().then((t=>{console.log(t);var e=this.$echarts.getInstanceByDom(document.getElementById("2l1")),a=e.getOption(),i=a.series[0].data;console.log(i);for(let o=0;o<t.length;o++)a.series[0].data[o]=t[o].air1,a.series[1].data[o]=t[o].air2,a.series[2].data[o]=t[o].air3;e.setOption(a)})).catch((t=>{console.log(t)}))},getData2L1new(){d().then((t=>{console.log(t);var e=this.$echarts.getInstanceByDom(document.getElementById("2l1")),a=e.getOption();for(let i=0;i<t.length;i++)a.series[0].data[i]=t[i].air1,a.series[1].data[i]=t[i].air2,a.series[2].data[i]=t[i].air3;e.setOption(a)})).catch((t=>{console.log(t)}))}},created(){this.$watch((()=>this.$root.iftemp),(t=>{console.log("Global iftemp changed:",t),"true"==t&&this.getData2L1new()}))}},u=h,p=a(1001),g=(0,p.Z)(u,l,c,!1,null,null,null),f=g.exports,b=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"texttable"},[e("span",[t._v("优化前："+t._s(this.before))]),e("br"),e("span",[t._v("优化后："+t._s(this.after))])]),e("div",{staticStyle:{width:"100%",height:"220%"},attrs:{id:"2l2"}})])},w=[],y=a(9279),S={data(){return{before:0,after:0}},mounted(){this.draw(),this.getData2L2()},methods:{draw(){var t=this.$echarts.init(document.getElementById("2l2"));window.addEventListener("resize",(function(){t.resize()}));var e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"0",top:"30",right:"20",bottom:"5",containLabel:!0},legend:{data:["优化前","优化后"],right:"center",top:0,textStyle:{color:"#000000"},itemWidth:12,itemHeight:10},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{rotate:0,textStyle:{color:"rgba(0,0,0,.6)",fontSize:14},formatter:"{value} h"},axisLine:{lineStyle:{color:"rgba(0,0,0,.1)"}},data:function(){let t=[];for(let e=0;e<=1440;e++)t.push(Math.round(e/60));return t}()},{axisPointer:{show:!1},axisLine:{show:!1},position:"bottom",offset:20}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{lineStyle:{color:"rgba(0,0,0,.1)"}},axisLabel:{formatter:"{value} KW·h",textStyle:{color:"rgba(0,0,0,.6)",fontSize:14}},splitLine:{lineStyle:{color:"rgba(0,0,0,.1)"}}}],series:[{name:"优化前",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{color:"rgba(66, 115, 243, 1)",width:2}},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(66, 115, 243, .2)"},{offset:1,color:"rgba(66, 115, 243, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)"}},itemStyle:{normal:{color:"rgba(66, 115, 243, 1)",borderColor:"rgba(66, 115, 243, .1)",borderWidth:12}},data:[62.5,64.4,66.1,64.9,70.1,67.2,67,63.42,70.12,68.94,67.27,66.1,62.5,64.4,66.1,64.9,70.1,67.2,67,63.42,70.12,68.94,67.27,66.1]},{name:"优化后",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{color:"rgba(65, 189, 195, 1)",width:2}},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(65, 189, 195,.2)"},{offset:1,color:"rgba(65, 189, 195, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)"}},itemStyle:{normal:{color:"rgba(65, 189, 195, 1)",borderColor:"rgba(65, 189, 195, .1)",borderWidth:12}},data:[.5,5.2,6.6,11.2,42.1,26,20.2,18.31,21.59,24.42,34.03,32.9,32.9,18.31,21.59,24.42,34.03,26,20.2,18.31,21.59,24.42,34.03,32.9]}]};t.setOption(e),window.addEventListener("resize",(function(){t.resize()}))},getData2L2(){(0,y.u)().then((t=>{var e=this.$echarts.getInstanceByDom(document.getElementById("2l2")),a=e.getOption(),i=a.series[0].data;console.log(i);for(let o=0;o<t.length;o++)a.series[0].data[o]=t[o].before,a.series[1].data[o]=t[o].after;this.before=t[t.length-1].before,this.after=t[t.length-1].after,e.setOption(a)})).catch((t=>{console.log(t)}))},getData2L2new(){(0,y.Y)().then((t=>{var e=this.$echarts.getInstanceByDom(document.getElementById("2l2")),a=e.getOption();console.log(t);for(let i=0;i<t.length;i++)a.series[1].data[i]=t[i].after;this.after=t[t.length-1].after,e.setOption(a)})).catch((t=>{console.log(t)}))}},created(){this.$watch((()=>this.$root.iftemp),(t=>{console.log("Global iftemp changed:",t),"true"==t&&this.getData2L2new()}))}},D=S,v=(0,p.Z)(D,b,w,!1,null,"759720be",null),x=v.exports,R=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"table-container"},[e("el-table",{attrs:{data:t.tableData,"row-style":{height:"10%"},"header-cell-style":{"text-align":"center",border:"none"},"cell-style":{"text-align":"center",border:"none"}}},[e("el-table-column",{attrs:{prop:"airStation",label:"空压站","min-width":"30%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{style:{color:"#1953FC"}},[t._v(t._s(a.row.airStation))])]}}])}),e("el-table-column",{attrs:{prop:"time1",label:"运行时间段1","min-width":"40%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.row.time1,expression:"scope.row.time1"}],style:{color:"#1953FC"},attrs:{type:"number",min:"0",max:"12"},domProps:{value:a.row.time1},on:{input:[function(e){e.target.composing||t.$set(a.row,"time1",e.target.value)},function(e){return t.validateInput(a.row,"time1")}]}}),e("span",{staticStyle:{"margin-left":"10px",color:"#1953fc"}},[t._v("h")])]}}])}),e("el-table-column",{attrs:{prop:"time2",label:"运行时间段2","min-width":"30%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.row.time2,expression:"scope.row.time2"}],style:{color:"#1953FC"},attrs:{type:"number",min:"12",max:"24"},domProps:{value:a.row.time2},on:{input:[function(e){e.target.composing||t.$set(a.row,"time2",e.target.value)},function(e){return t.validateInput(a.row,"time2")}]}}),e("span",{staticStyle:{"margin-left":"10px",color:"#1953fc"}},[t._v("h")])]}}])})],1)],1)])},_=[],C={mounted(){this.getData2R1()},data(){return{tableData:[{airStation:"空压站1",time1:"1:00 - 2:00",time2:"7:00 - 9:00"},{airStation:"空压站2",time1:"1:00 - 2:00",time2:"7:00 - 9:00"},{airStation:"空压站3",time1:"1:00 - 2:00",time2:"7:00 - 9:00"}]}},computed:{lastValidValue(){const t={};return this.tableData.forEach((e=>{t[e.id]={time1:e.time1,time2:e.time2}})),t}},watch:{tableData:{deep:!0,handler(t,e){this.updateR1Data(),console.log("tableData changed: ",t,e)}}},methods:{validateInput(t,e){const a=t[e];isNaN(a)?t[e]=this.lastValidValue[t.id][e]:this.lastValidValue[t.id][e]=a},getData2R1(){s().then((t=>{console.log(t);for(let e=0;e<t.length;e++)this.tableData[e].time1=t[e].time1,this.tableData[e].time2=t[e].time2})).catch((t=>{console.log(t)}))},updateR1Data(){const t={S1time1:this.tableData[0].time1,S1time2:this.tableData[0].time2,S2time1:this.tableData[1].time1,S2time2:this.tableData[1].time2,S3time1:this.tableData[2].time1,S3time2:this.tableData[2].time2};this.$emit("R1DataChanged",t)},getData2R1new(){}},created(){this.$watch((()=>this.$root.iftemp),(t=>{console.log("Global iftemp changed:",t),"true"==t&&this.getData2R1new()}))}},$=C,k=(0,p.Z)($,R,_,!1,null,"c2e9ae30",null),F=k.exports,L=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"table-container"},[e("el-table",{attrs:{data:t.tableData,"row-style":{height:"10%"},"header-cell-style":{"text-align":"center",border:"none"},"cell-style":t.rowStyle}},[e("el-table-column",{attrs:{prop:"airStation",label:"空压站","min-width":"30%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{style:{color:"#1953FC"}},[t._v(t._s(a.row.airStation))])]}}])}),e("el-table-column",{attrs:{prop:"time1",label:"第一次补气压力","min-width":"30%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.row.time1,expression:"scope.row.time1"}],style:{color:"#1953FC"},attrs:{type:"number"},domProps:{value:a.row.time1},on:{input:[function(e){e.target.composing||t.$set(a.row,"time1",e.target.value)},function(e){return t.validateInput(a.row,"time1")}]}}),e("span",{staticStyle:{"margin-left":"10px",color:"#1953fc"}},[t._v("kPa")])]}}])}),e("el-table-column",{attrs:{prop:"time2",label:"第二次补气压力","min-width":"30%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.row.time2,expression:"scope.row.time2"}],style:{color:"#1953FC"},attrs:{type:"number"},domProps:{value:a.row.time2},on:{input:[function(e){e.target.composing||t.$set(a.row,"time2",e.target.value)},function(e){return t.validateInput(a.row,"time2")}]}}),e("span",{staticStyle:{"margin-left":"10px",color:"#1953fc"}},[t._v("kPa")])]}}])})],1)],1)])},E=[],I={props:{childData:{type:Object,required:!0}},mounted(){this.getData2R2()},computed:{lastValidValue(){const t={};return this.tableData.forEach((e=>{t[e.id]={time1:e.time1,time2:e.time2}})),t}},methods:{validateInput(t,e){const a=t[e];isNaN(a)?t[e]=this.lastValidValue[t.id][e]:this.lastValidValue[t.id][e]=a},rowStyle({row:t,column:e,rowIndex:a,columnIndex:i}){return a%2===0?0===i?"text-align:center;border:2px solid #1953FC;border-right-width:0;":1===i?"text-align:center;border:2px solid #1953FC;border-right-width:0;border-left-width:0;":"text-align:center;border:2px solid #1953FC;border-left-width:0;":a%2===1?"text-align:center;border:none;":void 0},getData2R2(){s().then((t=>{console.log(t);for(let e=0;e<t.length;e++)this.tableData[e].time1=t[e].pressure1,this.tableData[e].time2=t[e].pressure2})).catch((t=>{console.log(t)}))},updateR2Data(){const t={S1time1:this.tableData[0].time1,S1time2:this.tableData[0].time2,S2time1:this.tableData[1].time1,S2time2:this.tableData[1].time2,S3time1:this.tableData[2].time1,S3time2:this.tableData[2].time2};this.$emit("R2DataChanged",t)},getData2R2new(){}},data(){return{tableData:[{airStation:"空压站1",time1:"---------- kPa",time2:"---------- kPa"},{airStation:"空压站2",time1:"---------- kPa",time2:"---------- kPa"},{airStation:"空压站3",time1:"---------- kPa",time2:"---------- kPa"}]}},watch:{tableData:{deep:!0,handler(t,e){this.updateR2Data(),console.log("tableData changed: ",t,e)}}},created(){this.$watch((()=>this.$root.iftemp),(t=>{console.log("Global iftemp changed:",t),"true"==t&&this.getData2R2new()}))}},P=I,B=(0,p.Z)(P,L,E,!1,null,"a1b70e08",null),V=B.exports,O={components:{EchartsL1:f,EchartsL2:x,ElementR1:F,ElementR2:V},data(){return{pR1Data:{S1time1:7.14,S1time2:13.36,S2time1:8.03,S2time2:12.56,S3time1:8.53,S3time2:12.42},pR2Data:{S1time1:833.982,S1time2:811.584,S2time1:819.897,S2time2:815.373,S3time1:827.273,S3time2:806.116}}},methods:{updateR1ParentData(t){this.pR1Data=t,console.log("下面是父组件中R1的数据---"),console.log(this.pR1Data)},updateR2ParentData(t){this.pR2Data=t,console.log("下面是父组件中R2的数据---"),console.log(this.pR2Data)},getdata(){this.$router.go(0)},updatedata(){if(this.pR1Data.S1time1<0||this.pR1Data.S1time1>12)this.$message({message:"空压站1时间1应在0-12之间",type:"warning"});else if(this.pR1Data.S1time2<12||this.pR1Data.S1time2>24)this.$message({message:"空压站1时间2应在12-24之间",type:"warning"});else if(this.pR1Data.S2time1<0||this.pR1Data.S2time1>12)this.$message({message:"空压站2时间1应在0-12之间",type:"warning"});else if(this.pR1Data.S2time2<12||this.pR1Data.S2time2>24)this.$message({message:"空压站2时间2应在12-24之间",type:"warning"});else if(this.pR1Data.S3time1<0||this.pR1Data.S3time1>12)this.$message({message:"空压站3时间1应在0-12之间",type:"warning"});else if(this.pR1Data.S3time2<12||this.pR1Data.S3time2>24)this.$message({message:"空压站3时间2应在12-24之间",type:"warning"});else{const t={s1time1:this.pR1Data.S1time1,s1time2:this.pR1Data.S1time2,s2time1:this.pR1Data.S2time1,s2time2:this.pR1Data.S2time2,s3time1:this.pR1Data.S3time1,s3time2:this.pR1Data.S3time2,s1pressure1:this.pR2Data.S1time1,s1pressure2:this.pR2Data.S1time2,s2pressure1:this.pR2Data.S2time1,s2pressure2:this.pR2Data.S2time2,s3pressure1:this.pR2Data.S3time1,s3pressure2:this.pR2Data.S3time2};n(t).then((t=>{console.log(t),this.$message({message:"应用优化成功",type:"success"})})).catch((t=>{console.log(t)})),this.$root.iftemp="true",setTimeout((()=>{this.$root.iftemp="false"}),500)}},resetdata(){this.$router.go(0)}}},U=O,z=(0,p.Z)(U,i,o,!1,null,null,null),G=z.exports},9279:function(t,e,a){a.d(e,{Y:function(){return r},u:function(){return o}});var i=a(1558);function o(){return(0,i.U)("/consumption/getDatas").then((t=>{if(200===t.code)return t.data;throw new Error(t.msg||"Unknown error")}))}function r(){return(0,i.U)("/consumption/getnewDatas").then((t=>{if(200===t.code)return t.data;throw new Error(t.msg||"Unknown error")}))}}}]);
//# sourceMappingURL=99.c2c92dea.js.map